<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Executive Summary</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<h2>Executive Summary</h2>

<p>This is a submission of The InsightDataEngineering Coding Challenge. The program written in java is memory efficient and high performing. Twitter feed of 2.5 million tweets was analyzed and design considerations were made based on this analysis. It is calculated that 2.5 million tweets will use about 140 MB of memory. Larger amounts of data will not use much more memory than this.</p>

<h2>The Challenge</h2>

<p>This challenge is to implement two features:</p>

<ol>
<li>Calculate the total number of times each word has been tweeted.</li>
<li>Calculate the median number of <em>unique</em> words per tweet, and update this median as tweets come in. </li>
</ol>

<p>For example, suppose the following three tweets come in, one after the other</p>

<ul>
<li>is #bigdata finally the answer to end poverty? @lavanyarathnam <a href="http://ow.ly/o8gt3">http://ow.ly/o8gt3</a>  #analytics<br/></li>
<li>interview: xia wang, astrazeneca on #bigdata and the promise of effective healthcare #kdn <a href="http://ow.ly/ot2uj">http://ow.ly/ot2uj</a><br/></li>
<li>big data is not just for big business. on how #bigdata is being deployed for small businesses: <a href="http://bddy.me/1bzukb3">http://bddy.me/1bzukb3</a>  @cxotodayalerts #smb<br/></li>
</ul>

<p>The first feature would produce the following total count for each word:</p>

<pre><code>#analytics                  1
#bigdata                    3
#kdn                        1
#smb                        1
@cxotodayalerts             1
@lavanyarathnam             1
and                         1
answer                      1
astrazeneca                 1
being                       1
big                         2
business.                   1 
businesses:                 1
data                        1
deployed                    1
effective                   1
end                         1
finally                     1
for                         2
healthcare                  1
how                         1
http://bddy.me/1bzukb3      1
http://ow.ly/o8gt3          1
http://ow.ly/ot2uj          1
interview:                  1
is                          3
just                        1
not                         1
of                          1
on                          2
poverty?                    1
promise                     1
small                       1
the                         2
to                          1
wang,                       1
xia                         1
</code></pre>

<p>For the second feature, the number of unique words in each tweet is 11, 14, and 17 (since the words &#39;is&#39;, &#39;big&#39;, and &#39;for&#39; appear twice in the third tweet).  This means that the set of unique words per tweet is {11} after the first tweet arrives, is {11, 14} after the second tweet arrives, and is {11, 14, 17} after all three tweets arrive.  Thus, the second feature would produce the following output:</p>

<pre><code>11
12.5
14
</code></pre>

<p>Recall that the median of a set with an even number of items is the mean of the two middle elements (e.g. the median of {11, 14} is 12.5). In this challenge we have made a few assumptions to make things simpler:</p>

<ul>
<li>Each tweet only contains lowercase letters, numbers, and ASCII characters like &#39;:&#39;, &#39;@&#39;, and &#39;#&#39;.</li>
<li>A word is defined as anything separated by whitespace. </li>
</ul>

<p>Note that the output of the first feature is outputted in order, according to the <a href="http://www.ascii-code.com">ASCII Code</a>.   </p>

<h2>Code and Execution</h2>

<p>The code for this challenge is written in Java and is tested on Java v1.7. No special libraries are needed besides the JRE jar files. Please excute ./run.sh file. The program will be compiled and then executed.</p>

<h2>Design</h2>

<p>Following performance considerations were made when designing the solution:</p>

<ol>
<li>The total memory required for both features</li>
<li>The IO requirements for both features</li>
</ol>

<p>2.6 million twitter feeds were analyized and </p>

<h3>Feature 1</h3>

<p>We obtained twitter data with following characteristics:</p>

<pre><code class="r">setwd(&quot;src/&quot;)
tfile &lt;- &quot;../../edu/ds-capstone/Coursera-SwiftKey/final/en_US/en_US.twitter.txt&quot;
(o &lt;- system(paste(&quot;wc -lc&quot;, tfile), intern=TRUE))
</code></pre>

<pre><code>## [1] &quot;  2360148 167105338 ../../edu/ds-capstone/Coursera-SwiftKey/final/en_US/en_US.twitter.txt&quot;
</code></pre>

<pre><code class="r">o &lt;- system(paste(&quot;java WordsInsight&quot;, tfile,
                  &quot;../test_output/ profile&quot;, sep=&quot; &quot;), intern=TRUE)
setwd(&quot;..&quot;)
</code></pre>

<p>Running the code with profiling enabled on above twitter feed produced the appropiate f1.txt. Analyzing f1.txt yeilds:</p>

<pre><code class="r">library(stringr)
wordFreq &lt;- readLines(&quot;test_output/ft1.txt&quot;)
wordFreq &lt;- str_match(wordFreq, &quot;(.+) ([0-9]+)&quot;)
wordFreq &lt;- as.data.frame(wordFreq[complete.cases(wordFreq), c(2,3)], stringsAsFactors=FALSE)
wordFreq[,2] &lt;- as.integer(wordFreq[,2])

totBytesWords &lt;- sum(nchar(wordFreq[,1]) * wordFreq[,2])
totBytesFreq &lt;- nrow(wordFreq) * 8 #long integers
totalBytes &lt;- totBytesWords + totBytesFreq;
types &lt;- c(&quot;Words&quot;, &quot;FreqCounts&quot;, &quot;Total&quot;)
bytes &lt;- c(totBytesWords, totBytesFreq, totalBytes)
bytesMB &lt;- bytes / 10^6

cbind(types, bytes, bytesMB)
</code></pre>

<pre><code>##      types        bytes       bytesMB     
## [1,] &quot;Words&quot;      &quot;134371579&quot; &quot;134.371579&quot;
## [2,] &quot;FreqCounts&quot; &quot;8640696&quot;   &quot;8.640696&quot;  
## [3,] &quot;Total&quot;      &quot;143012275&quot; &quot;143.012275&quot;
</code></pre>

<p>Thus for feature f1, the total bytes required for typical twitter ascii data would be around 140 MB, which is within range of most machines. This number should be similar for larger data feeds, since the frequency is stored in a dictionary object.</p>

<p>Note that this just computes the memory requirements based on the data. We have not computed program overhead related to buffer copies etc. This is discussed below.</p>

<h3>Feature 2</h3>

<p>When run with profiling enabled, the program produces uwc.txt, which contains the unique word count for each tweet. Analyzing this data:</p>

<pre><code class="r">uwc &lt;- read.table(&quot;test_output/uwc.txt&quot;)
uwc &lt;- uwc[,1]
summary(uwc)
</code></pre>

<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    1.00    7.00   12.00   12.21   17.00   37.00
</code></pre>

<pre><code class="r">buckets &lt;- as.data.frame(table(uwc))
names(buckets) &lt;- c(&quot;word.count&quot;, &quot;freq&quot;)
buckets
</code></pre>

<pre><code>##    word.count   freq
## 1           1   2080
## 2           2  58425
## 3           3 101575
## 4           4 118971
## 5           5 124261
## 6           6 132944
## 7           7 131869
## 8           8 129644
## 9           9 127359
## 10         10 123221
## 11         11 118091
## 12         12 113127
## 13         13 109043
## 14         14 104538
## 15         15 102000
## 16         16  98225
## 17         17  97175
## 18         18  94843
## 19         19  93014
## 20         20  89057
## 21         21  81193
## 22         22  70103
## 23         23  54792
## 24         24  38212
## 25         25  23986
## 26         26  12960
## 27         27   6058
## 28         28   2309
## 29         29    766
## 30         30    230
## 31         31     52
## 32         32     16
## 33         33      7
## 34         34      1
## 35         37      1
</code></pre>

<p>Given that a tweet can be at most 140 characters the maximum number of unique words in it can 70. If we allow for zero lenght tweets then we need a data strucutre of maximum 71 buckets to represent word count in tweets. </p>

<p>With this intuition the algorithm to find running median is designed as follows:</p>

<ol>
<li>Create a 71 &ldquo;buckets&rdquo; numbered 0-71 (a total of 72). Initialize each bucket&#39;s value to zero</li>
<li>When a tweet arrives count unique words in it.</li>
<li>Find the bucket whose number matches the unique word count for this tweet.</li>
<li>Increment the bucket&#39;s value.</li>
</ol>

<p>To find the running median:</p>

<ol>
<li>We calualte the median positon = (total tweets / 2) and </li>
<li>Scan for the bucket that contains the median position

<ul>
<li>Start from bucket#0 and iteratively subtract each bukect&#39;s value from median position.</li>
<li>Stop when median position &lt;= zero</li>
</ul></li>
<li>Once we find the bucket, we return its number (not the value)</li>
</ol>

<p>With the use of bucket datastructure, we dont need to keep the per tweet running median in memory. We therefore flush the medians to disk allowing efficent use of memory.</p>

<h2>Open Issues</h2>

<p>Following issues currently exist in the code:</p>

<ol>
<li>Use of imutable objects require memory alloc/dealloc. These are java.lang.Long objects used to store word frequencies</li>
<li>Calcualte and improve performance of word frequency data structures</li>
<li>Calcualte and improve performance of split function</li>
</ol>

<h2>Conclusion</h2>

<p>This is a submission of The InsightDataEngineering Coding Challenge. The program written in java is memory efficient and high performing. </p>

</body>

</html>
